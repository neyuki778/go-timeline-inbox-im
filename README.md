# Go-IMï¼šåŸºäº Go çš„å³æ—¶é€šè®¯ç³»ç»Ÿ


ä¸€ä¸ªä»é›¶å¼€å§‹æ„å»ºçš„ç°ä»£åŒ–å³æ—¶é€šè®¯ï¼ˆIMï¼‰ç³»ç»Ÿï¼Œé‡‡ç”¨**è¯»æ‰©æ•£**ï¼ˆTimelineï¼‰+ **å†™æ‰©æ•£**ï¼ˆInboxï¼‰æ··åˆæ¨¡å‹ï¼Œæ”¯æŒç¾¤èŠã€å•èŠåŠç¦»çº¿æ¶ˆæ¯æ–­ç‚¹ç»­ä¼ ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### æ¶æ„è®¾è®¡
- **åˆ†å±‚æ¶æ„**ï¼šéµå¾ª `golang-standards` é¡¹ç›®ç»“æ„ï¼ŒèŒè´£æ¸…æ™°
- **è¯»æ‰©æ•£ Timeline æ¨¡å‹**ï¼šç¾¤èŠåœºæ™¯ä¸‹ç»Ÿä¸€å­˜å‚¨ï¼ŒæŒ‰éœ€æ‹‰å–
- **å†™æ‰©æ•£ Inbox æ¨¡å‹**ï¼šå•èŠåœºæ™¯ä¸‹é¢„å†™ç”¨æˆ·ä¿¡ç®±ï¼Œç§’çº§æŸ¥è¯¢
- **ä¼šè¯å†…åºåˆ—å·**ï¼šåŸºäº `conversation_id` + `seq` çš„å¤åˆå”¯ä¸€ç´¢å¼•ï¼Œè§£å†³å¤šä¼šè¯æ¼æ‹‰/è¯¯æ‹‰é—®é¢˜

### æŠ€æœ¯äº®ç‚¹
- **å¹‚ç­‰ä¿è¯**ï¼šå®¢æˆ·ç«¯ `msg_id` + æœåŠ¡ç«¯å»é‡ï¼Œé˜²æ­¢æ¶ˆæ¯é‡å¤
- **æ¸¸æ ‡åˆ†é¡µ**ï¼š`cursor_seq` æ›¿ä»£ä¼ ç»Ÿ OFFSETï¼Œé¿å…ç¿»é¡µé‡å¤/é—æ¼
- **æ–­ç‚¹ç»­ä¼ **ï¼šç”¨æˆ·ç¦»çº¿ååŸºäº `seq` ç²¾å‡†æ‹‰å–æœªè¯»æ¶ˆæ¯
- **é«˜æ€§èƒ½**ï¼šRedis ç”Ÿæˆå…¨å±€åºåˆ—å·ï¼ŒSorted Set å®ç°ä¿¡ç®±å¿«é€ŸæŸ¥è¯¢
- **ç”Ÿäº§çº§å¯é æ€§**ï¼šäº‹åŠ¡ä¿è¯ã€æ­»é”é‡è¯•ã€å¹¶å‘å®‰å…¨è¿æ¥ç®¡ç†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ |
|------|----------|------|
| **å¼€å‘è¯­è¨€** | Go | 1.21+ |
| **Web æ¡†æ¶** | Gin | v1.9+ |
| **WebSocket** | gorilla/websocket | v1.5+ |
| **æ•°æ®åº“** | MySQL | 8.0 |
| **ç¼“å­˜** | Redis | 7.0 |
| **ORM** | GORM | v1.25+ |
| **å®¹å™¨åŒ–** | Docker Compose | v3.9+ |

## ğŸ“Š ç³»ç»Ÿæ¶æ„

![æ¶æ„å›¾](docs/images/æ¶æ„å›¾.svg)

## ğŸ—ï¸ é¡¹ç›®è¿­ä»£è¿‡ç¨‹

æœ¬é¡¹ç›®é‡‡ç”¨**åˆ†é˜¶æ®µé€’è¿›**çš„å¼€å‘ç­–ç•¥ï¼Œéµå¾ª "Make it Work â†’ Make it Scale" çš„å·¥ç¨‹å“²å­¦ã€‚

### é˜¶æ®µä¸€ï¼šå•æœº MVPï¼ˆå·²å®Œæˆï¼‰

**ç›®æ ‡**ï¼šå®ç°åŸºäº MySQL çš„è¯»æ‰©æ•£æ¨¡å‹ï¼Œè·‘é€šæ ¸å¿ƒæµç¨‹

#### å…³é”®é‡Œç¨‹ç¢‘
1. **æ•°æ®åº“è®¾è®¡**
   - è®¾è®¡ `timeline_message` è¡¨ï¼Œé‡‡ç”¨ `(conversation_id, seq)` å¤åˆå”¯ä¸€ç´¢å¼•
   - å¼•å…¥ `msg_id` å¹‚ç­‰å­—æ®µï¼Œè§£å†³å®¢æˆ·ç«¯é‡è¯•é—®é¢˜
   - åˆ›å»º `user_conversation_state` è¡¨ï¼Œæ”¯æŒå¤šä¼šè¯ç‹¬ç«‹ ACK

2. **WebSocket é•¿è¿æ¥**
   - ä½¿ç”¨ Gin + gorilla/websocket å®ç°è¿æ¥å‡çº§
   - å®ç°å¿ƒè·³æœºåˆ¶ï¼ˆ30s é—´éš”ï¼Œ2-3 æ¬¡è¶…æ—¶æ–­çº¿ï¼‰
   - å¹¶å‘å®‰å…¨çš„è¿æ¥ç®¡ç†å™¨ï¼ˆ`sync.RWMutex` ä¿æŠ¤ï¼‰

3. **æ¶ˆæ¯æ”¶å‘æ ¸å¿ƒ**
   - äº‹åŠ¡å†…ç”Ÿæˆä¼šè¯å†… `seq`ï¼ˆ`SELECT MAX(seq) + 1 FOR UPDATE`ï¼‰
   - å¹‚ç­‰å¤„ç†ï¼šæ•è· MySQL 1062 é”™è¯¯ï¼Œè¿”å›å·²æœ‰ seq
   - åœ¨çº¿æ¨é€ + ç¦»çº¿æ‹‰å–åŒæ¨¡å¼

4. **æ¸¸æ ‡åˆ†é¡µ**
   - ç”¨ `cursor_seq` æ›¿ä»£ä¼ ç»Ÿ OFFSETï¼Œé¿å…æ·±åˆ†é¡µé—®é¢˜
   - è¿”å› `next_cursor_seq` å’Œ `has_more` æ ‡è®°ï¼Œæ”¯æŒè¿ç»­æ‹‰å–

#### æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

| éš¾ç‚¹ | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **ä¼šè¯éš”ç¦»** | å¤šä¼šè¯å…±äº«è‡ªå¢ ID å¯¼è‡´æ¼æ‹‰/è¯¯æ‹‰ | å¼•å…¥ `(conversation_id, seq)` å¤åˆç´¢å¼•ï¼ŒæŒ‰ä¼šè¯ç‹¬ç«‹è®¡æ•° |
| **å¹¶å‘å†™å…¥** | å¤šç”¨æˆ·åŒæ—¶å‘é€æ¶ˆæ¯ï¼Œseq å†²çª | äº‹åŠ¡ + `FOR UPDATE` è¡Œé”ï¼Œä¿è¯åŸå­æ€§ |
| **è¿æ¥ç®¡ç†** | Go Map å¹¶å‘è¯»å†™ panic | ä½¿ç”¨ `sync.RWMutex`ï¼Œè¯»å¤šå†™å°‘åœºæ™¯ä¼˜åŒ– |
| **å¹‚ç­‰ä¿è¯** | å®¢æˆ·ç«¯ç½‘ç»œæŠ–åŠ¨é‡è¯•ï¼Œæ¶ˆæ¯é‡å¤ | å”¯ä¸€ç´¢å¼• `uk_msg_id`ï¼Œæ•è·mySQLé”™è¯¯è¿”å›å·²æœ‰ç»“æœ |

### é˜¶æ®µäºŒï¼šRedis æ€§èƒ½ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰

**ç›®æ ‡**ï¼šè§£å†³ MySQL æ€§èƒ½ç“¶é¢ˆï¼Œå¼•å…¥ Inbox æ¨¡å‹æ”¯æŒå•èŠ

#### å…³é”®æ”¹è¿›

1. **Redis åºåˆ—å·ç”Ÿæˆå™¨**
   ```go
   // æ›¿ä»£ MySQL äº‹åŠ¡é”ï¼Œæ€§èƒ½æå‡ 10x+
   func (g *RedisSeqGenerator) NextSeq(ctx context.Context, conversationID string) (uint64, error) {
       key := g.prefix + conversationID  // im:seq:group_101
       return g.client.Incr(ctx, key).Result()
   }
   ```
   - **ä¼˜åŠ¿**ï¼šæ— é”ã€å†…å­˜æ“ä½œã€æ”¯æŒåˆ†å¸ƒå¼
   - **æŒä¹…åŒ–**ï¼šAOF ä¿è¯æ•°æ®å®‰å…¨

2. **Inbox å†™æ‰©æ•£**
   - ä½¿ç”¨ Redis Sorted Set å®ç°å•èŠä¿¡ç®±
   - Key è®¾è®¡ï¼š`im:inbox:{user_id}`
   - Scoreï¼šæ¶ˆæ¯ seqï¼ˆä¿è¯æœ‰åºï¼‰
   - Memberï¼šJSON åºåˆ—åŒ–çš„æ¶ˆæ¯å…ƒä¿¡æ¯
   
   ```go
   // å•èŠæ¶ˆæ¯åŒå†™
   // 1. MySQL å½’æ¡£ï¼ˆå…¨é‡ï¼‰
   repo.SaveMessage(msg)
   // 2. Redis ä¿¡ç®±ï¼ˆçƒ­æ•°æ®ï¼‰
   inbox.Append(msg, []string{"alice", "bob"})
   ```

3. **è¿‡æœŸç­–ç•¥**
   - TTL è®¾ç½®ï¼š7 å¤©è‡ªåŠ¨è¿‡æœŸ
   - é™ä½ Redis å†…å­˜å‹åŠ›
   - è¶…æœŸæ¶ˆæ¯è‡ªåŠ¨å›æº MySQL

#### æ€§èƒ½å¯¹æ¯”

**åŸºå‡†æµ‹è¯•ç¯å¢ƒ**ï¼šApple M4 (10 cores)ã€MySQL 8.0ã€Redis 7.0

```bash
# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=HandleChatSeq -benchmem ./internal/service
```

**æµ‹è¯•ç»“æœ**ï¼š

| æ–¹æ¡ˆ | å»¶è¿Ÿ (ns/op) | å†…å­˜ (B/op) | åˆ†é…æ¬¡æ•° (allocs/op) | æ€§èƒ½æå‡ |
|------|-------------|------------|---------------------|---------|
| **MySQL seq ç”Ÿæˆ** | 1,926,873 ns (~1.93ms) | 14,432 | 168 | åŸºçº¿ |
| **Redis seq ç”Ÿæˆ** | 1,666,781 ns (~1.67ms) | 10,008 | 104 | **å»¶è¿Ÿ â†“ 13.5%**<br>**å†…å­˜ â†“ 30.6%** |
| **Redis seq + Inbox** | 1,755,499 ns (~1.76ms) | 12,808 | 161 | **å»¶è¿Ÿ â†“ 8.9%**<br>**å†…å­˜ â†“ 11.3%** |

**å…³é”®å‘ç°**ï¼š
- âœ… Redis åºåˆ—å·ç”Ÿæˆæ¯” MySQL äº‹åŠ¡é”å¿« **13.5%**ï¼Œå†…å­˜å ç”¨å‡å°‘ **30.6%**
- âœ… åŠ å…¥ Inbox å†™æ‰©æ•£åï¼Œå»¶è¿Ÿä»…å¢åŠ  5%ï¼ˆä» 1.67ms â†’ 1.76msï¼‰ï¼Œå•èŠåœºæ™¯æ”¶ç›Šå·¨å¤§

- ğŸ“Š Redis æ–¹æ¡ˆæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘ï¼ŒMySQL æ–¹æ¡ˆå—äº‹åŠ¡é”é™åˆ¶**

### é˜¶æ®µä¸‰ï¼šæ¶ˆæ¯é˜Ÿåˆ—è§£è€¦ï¼ˆè§„åˆ’ä¸­ï¼‰

**ç›®æ ‡**ï¼šå¼•å…¥ RabbitMQ å®ç°å‰Šå³°å¡«è°·ï¼Œæå‡ç³»ç»Ÿåå

#### è§„åˆ’ç‰¹æ€§
- Gateway æ¥æ”¶æ¶ˆæ¯åç«‹å³å…¥é˜Ÿï¼Œå¼‚æ­¥å¤„ç†
- Worker æ¶ˆè´¹é˜Ÿåˆ—ï¼Œæ‰¹é‡å†™åº“
- æµé‡çªåˆºåœºæ™¯ï¼ˆç¾¤å‘ã€è¥é”€æ´»åŠ¨ï¼‰ä¸é˜»å¡è¿æ¥

### æ•°æ®æµ
1. **å‘é€æ¶ˆæ¯**ï¼šå®¢æˆ·ç«¯ â†’ WebSocket â†’ ç”Ÿæˆ seqï¼ˆRedisï¼‰ â†’ å†™ MySQLï¼ˆTimelineï¼‰ â†’ å†™ Inboxï¼ˆRedisï¼‰â†’ æ¨é€åœ¨çº¿ç”¨æˆ·
2. **ç¦»çº¿æ‹‰å–**ï¼šå®¢æˆ·ç«¯é‡è¿ â†’ å¸¦ `cursor_seq` è¯·æ±‚ â†’ æŸ¥è¯¢ MySQL/Redis â†’ è¿”å›æ¶ˆæ¯åˆ—è¡¨ + ä¸‹ä¸€æ¸¸æ ‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Go 1.21+
- Docker & Docker Compose

### ä¸€é”®å¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/neyuki778/go-inbox-im.git
cd go-im

# 2. å¯åŠ¨åŸºç¡€è®¾æ–½ï¼ˆMySQL + Redisï¼‰
docker-compose up -d

# 3. ç­‰å¾…æœåŠ¡å°±ç»ªï¼ˆçº¦ 30 ç§’ï¼‰
docker-compose ps

# 4. éªŒè¯æ•°æ®åº“
docker exec -it go-im-mysql mysql -u im_user -pim_pass123 \
  -e "USE go_im; SHOW TABLES;"

# 5. å®‰è£…ä¾èµ–
go mod download

# 6. è¿è¡ŒæœåŠ¡
go run cmd/server/main.go
```

æœåŠ¡å¯åŠ¨åç›‘å¬ `http://localhost:8080`ã€‚

### ç¯å¢ƒé…ç½®

| æœåŠ¡ | åœ°å€ | ç«¯å£ | ç”¨æˆ·å | å¯†ç  |
|------|------|------|--------|------|
| MySQL | localhost | 8848 | im_user | im_pass123 |
| Redis | localhost | 6379 | - | - |
| WebSocket | localhost | 8080 | - | - |

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./internal/...

# è¿è¡ŒæŒ‡å®šåŒ…æµ‹è¯•
go test ./internal/service -v

# æµ‹è¯•è¦†ç›–ç‡
go test ./internal/... -cover
```

### æµ‹è¯•è¦†ç›–
- âœ… **å•å…ƒæµ‹è¯•**ï¼šRepositoryã€Service å±‚ Mock æµ‹è¯•
- âœ… **é›†æˆæµ‹è¯•**ï¼šRedis + MySQL ç«¯åˆ°ç«¯éªŒè¯
- âœ… **å¹‚ç­‰æµ‹è¯•**ï¼šé‡å¤ `msg_id` åœºæ™¯è¦†ç›–

## ğŸ“¡ åè®®ç¤ºä¾‹

### è¿æ¥
```bash
# å®¢æˆ·ç«¯é€šè¿‡ WebSocket è¿æ¥
ws://localhost:8080/ws?user_id=alice
```

### å¿ƒè·³
```json
// å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯
{"cmd": 0}

// æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯
{"cmd": 0, "code": 0}
```

### å‘é€æ¶ˆæ¯
```json
// å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯
{
  "cmd": 2,
  "msg_id": "uuid-client-generated",
  "conversation_id": "group_101",
  "payload": {"content": "Hello World", "msg_type": 1}
}

// æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯
{
  "cmd": 2,
  "code": 0,
  "msg_id": "uuid-client-generated",
  "seq": 1001
}
```

### æ‹‰å–ç¦»çº¿æ¶ˆæ¯
```json
// å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯
{
  "cmd": 3,
  "conversation_id": "group_101",
  "cursor_seq": 100
}

// æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯
{
  "cmd": 3,
  "code": 0,
  "payload": [
    {"msg_id": "...", "seq": 101, "content": "..."},
    {"msg_id": "...", "seq": 102, "content": "..."}
  ],
  "next_cursor_seq": 102,
  "has_more": true
}
```

## ğŸ—‚ï¸ æ•°æ®åº“è®¾è®¡

### timeline_messageï¼ˆæ¶ˆæ¯ä¸»è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®ï¼ˆè‡ªå¢ï¼‰ |
| msg_id | VARCHAR(64) | å®¢æˆ·ç«¯ç”Ÿæˆçš„å”¯ä¸€ IDï¼ˆå¹‚ç­‰ï¼‰ |
| conversation_id | VARCHAR(64) | ä¼šè¯ ID |
| seq | BIGINT | **ä¼šè¯å†…åºåˆ—å·**ï¼ˆæ ¸å¿ƒï¼‰ |
| sender_id | VARCHAR(64) | å‘é€è€… ID |
| content | VARCHAR(4096) | æ¶ˆæ¯å†…å®¹ |
| msg_type | TINYINT | 1:æ–‡æœ¬, 2:å›¾ç‰‡ |
| send_time | BIGINT | å‘é€æ—¶é—´æˆ³ |

**ç´¢å¼•**ï¼š
- `UNIQUE(msg_id)` â†’ å¹‚ç­‰å»é‡
- `UNIQUE(conversation_id, seq)` â†’ ä¿è¯ä¼šè¯å†… seq å”¯ä¸€
- `INDEX(conversation_id, seq)` â†’ èŒƒå›´æ‹‰å–æ€§èƒ½ä¼˜åŒ–

### user_conversation_stateï¼ˆACK ä½ç‚¹è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| user_id | VARCHAR(64) | ç”¨æˆ· ID |
| conversation_id | VARCHAR(64) | ä¼šè¯ ID |
| last_ack_seq | BIGINT | æœ€åç¡®è®¤çš„åºåˆ—å· |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

**ä¸»é”®**ï¼š`(user_id, conversation_id)`

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°
- âœ… Redis ç”Ÿæˆåºåˆ—å·ï¼Œé¿å… MySQL è‡ªå¢é”ç«äº‰
- âœ… å•èŠæ¶ˆæ¯èµ° Inboxï¼ˆRedis Sorted Setï¼‰ï¼ŒæŸ¥è¯¢è€—æ—¶ < 5ms
- âœ… æ¸¸æ ‡åˆ†é¡µé¿å…æ·±åˆ†é¡µæ€§èƒ½é—®é¢˜
- âœ… æ¶ˆæ¯å†…å®¹é™åˆ¶ 4KBï¼Œé˜²æ­¢è¶…å¤§æ¶ˆæ¯å½±å“ä¼ è¾“

### æœªæ¥è§„åˆ’
- ğŸ”² å¼•å…¥ RabbitMQ å‰Šå³°å¡«è°·ï¼ˆé˜¶æ®µä¸‰ï¼‰
- ğŸ”² å¤§ç¾¤ï¼ˆ>500äººï¼‰åŠ¨æ€åˆ‡æ¢è¯»æ‰©æ•£
- ğŸ”² æ¶ˆæ¯è¡¥æ´æœºåˆ¶ï¼ˆæ£€æµ‹ seq ä¸è¿ç»­ï¼‰
- ğŸ”² CDN æ”¯æŒå›¾ç‰‡/æ–‡ä»¶æ¶ˆæ¯

## ğŸ“ ä»£ç ç»“æ„

```
.
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go                 # å…¥å£ï¼šä¾èµ–æ³¨å…¥ä¸å¯åŠ¨
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â””â”€â”€ websocket.go            # WebSocket æ¡æ‰‹ä¸æ¶ˆæ¯è·¯ç”±
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ message_service.go      # æ¶ˆæ¯å¤„ç†æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ seq_generator.go        # Redis åºåˆ—å·ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ inbox_service.go        # Inbox å†™æ‰©æ•£
â”‚   â”‚   â”œâ”€â”€ push_service.go         # åœ¨çº¿æ¨é€
â”‚   â”‚   â”œâ”€â”€ pull_service.go         # ç¦»çº¿æ‹‰å–
â”‚   â”‚   â””â”€â”€ connection_manager.go   # è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”œâ”€â”€ message_repository.go   # æ¶ˆæ¯æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ pull_repository.go      # æ‹‰å–æŸ¥è¯¢
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ message.go              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ protocol.go             # åè®®å®šä¹‰
â”‚   â””â”€â”€ infra/
â”‚       â””â”€â”€ redis_client.go         # Redis è¿æ¥
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ init.sql                    # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docker-compose.yml              # åŸºç¡€è®¾æ–½ç¼–æ’
â””â”€â”€ go.mod                          # ä¾èµ–ç®¡ç†
```

## ğŸ”§ ç®€å•æ•…éšœæ’æŸ¥

### WebSocket è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨
curl http://localhost:8080/ws

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f
```

### MySQL è¿æ¥è¶…æ—¶
```bash
# ç¡®è®¤ MySQL å°±ç»ª
docker exec -it go-im-mysql mysqladmin ping -h localhost -u root -proot123

# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8848
```

### Redis è¿æ¥å¤±è´¥
```bash
# æµ‹è¯• Redis è¿é€šæ€§
docker exec -it go-im-redis redis-cli ping
```
## å‚è€ƒ

https://help.aliyun.com/zh/tablestore/use-cases/message-system-architecture-in-the-modern-im-system